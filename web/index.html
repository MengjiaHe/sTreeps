<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>jotoko</title>
	<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>
	<script type="text/javascript" src="js/jquery.path.js"></script>
	<link type="text/css" href="css/main.css" rel="stylesheet"></link>
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<script>
		jQuery(function() {
			new sTreepsJS(jQuery); 
		})
		var sTreepsJS = (function($) {
			var _scrollTop = 0,
				_currentText = 0,
				_textDivs,
				_currentPath = 0,
				_beePath = [
					{
						x: 0,
						y: 0,
						angle: 315.012,
						length: 0.707
					},
					{
						x: 50,
						y: 10,
						angle: 315.012,
						length: 0.707
					},
					{
						x: -80,
						y: 50,
						angle: 315.012,
						length: 0.707
					},
					{
						x: 20,
						y: 20,
						angle: 315.012,
						length: 0.707
					}
				],
				_hotSpot = [
					{
						x: -200,
						y: 200
					},
					{
						x: 200,
						y: 600
					},
					{
						x: -600,
						y: 900
					}
				],
				_path = {
					start: undefined,
					end: AddHotSpot(Clone(_beePath[0]))
				};


			function Init() {
				SetJQueryBindings();
				Animate();
			}

			function SetJQueryBindings() {
				$(window).scroll(OnScroll);
				_textDivs = $(".mainPost");
			}

			function Animate() {
				_currentPath = (_currentPath + 1)%_beePath.length;

				_path.start = _path.end;
				_path.end = Clone(_beePath[_currentPath]);

				AddHotSpot(_path.end);

				$('#bee').animate({
				    path : new $.path.bezier(_path)
				}, 2000, Animate);
			}

			function Clone(obj) {
			    if (null == obj || "object" != typeof obj) return obj;
			    var copy = obj.constructor();
			    for (var attr in obj) {
			        if (obj.hasOwnProperty(attr)) copy[attr] = obj[attr];
			    }

			    return copy;
			}

			function AddHotSpot(position) {
				var hotSpotPosition = _hotSpot[Math.min(_currentText, _hotSpot.length - 1)];
				position.x += hotSpotPosition.x;
				position.y += hotSpotPosition.y;

				return position;
			}

			
			function OnScroll(scroll) {
				var top = $("body").scrollTop(),
					deltaScroll = top - _scrollTop,
					infoText = $("#infoText"),
					topOffset = infoText.offset().top,
					bottomOffset = topOffset + infoText.height(),
					bee = $("#bee"),
					header = $("#header");

				// Header
				header.toggleClass("minimized", top > 40);

				// Text logic
				var previousText = _currentText; 
				if (deltaScroll > 0) {
					if (_currentText < _textDivs.length - 1)
						if ($(_textDivs[_currentText + 1]).offset().top < topOffset) {
							_currentText += 1;
						}
				} else {
					if ($(_textDivs[_currentText]).offset().top > bottomOffset) {
						_currentText -= 1;
					}
				}

				if (_currentText != previousText) {
					var lastText = _textDivs.length - 1; 
					for (var i = 0; i < lastText; ++i) {
						$(_textDivs[i]).toggleClass("active", i <= _currentText);
					}
					$(_textDivs[lastText]).toggleClass("active", _currentText >= lastText - 1);
				}

				infoText.html(_textDivs[_currentText].getAttribute('data-text'));
				_scrollTop = top;
			}

			Init();
		});
	</script>
</head>
<body>
<div id="mainContainer">
	<div id="header">
		<div>
			<div id="logo" class="w25100 logo">
				<img id="logoJ" src="img/logoJ.png">
				<img id="logoO" src="img/logoO.png">
				<img id="logoT" src="img/logoT.png">
				<img id="logoO2" src="img/logoO2.png">
				<img id="logoK" src="img/logoK.png">
				<img id="logoO3" src="img/logoO3.png">
			</div>
			<div id="navbar" class="w75100">
				<ul class="ch-grid">
					<li>
						<div class="ch-item ch-img-3">
							<div class="ch-info">
								<p>Media</p>
							</div>
						</div>
					</li>
					<li>
						<div class="ch-item ch-img-2">
							<div class="ch-info">
								<p>Blog</p>
							</div>
						</div>
					</li>
					<li>
						<div class="ch-item ch-img-1">
							<div class="ch-info">
								<p>Mix and match</p>
							</div>
						</div>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<div id="container">
		<div id="infoText"> 
			These are not normal<br>plants and trees.
		</div>
		<div id="strip1" class="yellow mainPost" data-text="These are not normal<br>plants and trees.">
			
			<div id="sun">
				<img id="sunOutter" src="img/sunOutter.png">
				<img id="sunInner" src="img/sunInner.png">
			</div>
		</div>
		<div id="strip2" class="interactiveStrip green mainPost" data-text="Mix the strips to see <br> the world change.">
			<div class="fake yellow">

			</div>
			<div class="real green">

			</div>
		</div>
		<div id="strip3" class="interactiveStrip right blue mainPost" data-text="available when it is done :)">
			<div class="fake yellow">
				<div id="faceCactus">
					<img src="img/faceCactus.png">
				</div>
				<div id="maracaLeft">
					<img src="img/maracaLeft.png">
				</div>
				<div id="maracaRight">
					<img src="img/maracaRight.png">
				</div>
			</div>
			<div class="real blue">
				<div id="birdHouse">
					<img src="img/birdHouse.png">
				</div>
				<div id="hive">
					<img src="img/hive.png">
				</div>
				<div id="face">
					<img id="mouth" src="img/faceYoung.png">
					<img id="eyes" src="img/eyesYoung.png">
				</div>
			</div>
		</div>
		<div id="strip4" class="mainPost interactiveStrip">
			<div class="fake yellow">
			</div>
			<div class="real green">
				<div id="streepsLogo">
					<img src="img/logo.png">
				</div>
			</div>
		</div>
		<div id="bee">
			<img src="img/bee_body.png">
		</div>
	</div>
	<div id="footer">
		<div>
			<div class="media vpadding">
				<span class="icon-stack icon-2x facebookColor clickable">
				  <a href="https://plus.google.com/b/108957928751339495454/108957928751339495454/" target="_blank">
					  <i class="icon-circle icon-stack-base"></i>
					  <i class="icon-facebook icon-light icon-overlay"></i>
				  </a>
				</span>
				<span class="icon-stack icon-2x googlePlusColor clickable" >
				  <a href="https://plus.google.com/b/108957928751339495454/108957928751339495454/" target="_blank">
					  <i class="icon-circle icon-stack-base"></i>
					  <i class="icon-google-plus icon-light icon-overlay"></i>
				  </a>
				</span>
				<span class="icon-stack icon-2x twitterColor clickable">
				  <a href="https://twitter.com/jotokotoys" target="_blank">
					  <i class="icon-circle icon-stack-base"></i>
					  <i class="icon-twitter icon-light icon-overlay"></i>
				  </a>
				</span>
				<span class="icon-stack icon-2x instagramColor clickable">
				  <a href="https://plus.google.com/b/108957928751339495454/108957928751339495454/" target="_blank">
					  <i class="icon-circle icon-stack-base"></i>
					  <i class="icon-instagram icon-light icon-overlay"></i>
				  </a>
				</span>
				<span class="icon-stack icon-2x pinterestColor clickable">
				  <a href="http://www.pinterest.com/jotoko/" target="_blank">
					  <i class="icon-circle icon-stack-base"></i>
					  <i class="icon-pinterest icon-light icon-overlay"></i>
				  </a>
				</span>
				<span class="icon-stack icon-2x tumblrColor clickable">
				  <a href="http://jotokotoys.tumblr.com/" target="_blank">
					  <i class="icon-circle icon-stack-base"></i>
					  <i class="icon-tumblr icon-light icon-overlay"></i>
				  </a>
				</span>
			</div>
		</div>
	</div>
</div>

</body>
</html>